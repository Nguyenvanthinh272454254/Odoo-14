<odoo>
  <data>
    
      <record id="my_project_from_view" model="ir.ui.view">
        <field name="name">my_project_from_view</field>
        <field name="model">my.project</field>
        <!-- <field name="inherit_id" ref="project.project_project_view_form_simplified_footer"></field> -->
        <field name="arch" type="xml">
          <tree  string="My Project" >
            <field name="name"/>
            <field name="partner_id"/>
            <field name="partner_email"/>
            <field name="partner_phone"/>
            <field name="company_id"/>
            <field name="currency_id"/>
          </tree>
          <!-- <xpath expr="//button[@name='action_view_tasks']" position="after">
            <field name="name"/>
            <field name="partner_id"/>
          </xpath> -->
   
        </field>
      </record>
<!-- Tu model project goc -->
      <!-- <record id="my_project_view_form_simplified_footer" model="ir.ui.view">
        <field name="name">my.projectview.form.simplified</field>
        <field name="model">my.project</field>
        <field name="mode">primary</field>
        <field name="arch" type="xml">
            <xpath expr="//group" position="after">
                <footer>
                    <button string="Create" name="action_view_tasks" type="object" class="btn-primary o_open_tasks"/>
                    <button string="Discard" class="btn-secondary" special="cancel"/>
                </footer>
            </xpath>
        </field>
    </record> -->

    <record id="open_create_my_project" model="ir.actions.act_window">
      <field name="name">Create a Project</field>
      <field name="res_model">my.project</field>
      <!-- <field name="view_mode">form</field> -->
      <field name="target">new</field>
  </record>

  <record model="ir.ui.view" id="view_my_project_kanban">
    <field name="name">my.project.kanban</field>
    <field name="model">my.project</field>
    <field name="arch" type="xml">
        <kanban class="oe_background_grey o_kanban_dashboard o_project_kanban o_emphasize_colors" on_create="project.open_create_project" sample="1">
            <field name="name"/>
            <field name="partner_id"/>
            <field name="color"/>
            <field name="task_count"/>
            <field name="label_tasks"/>
            <field name="alias_id"/>
            <field name="alias_name"/>
            <field name="alias_domain"/>
            <field name="is_favorite"/>
            <field name="rating_percentage_satisfaction"/>
            <field name="rating_status"/>
            <field name="rating_active" />
            <field name="analytic_account_id"/>
            <templates>
                <t t-name="kanban-box">
                    <div t-attf-class="#{kanban_color(record.color.raw_value)} oe_kanban_global_click o_has_icon">
                        <div class="o_project_kanban_main">
                            <div class="o_kanban_card_content">
                                <div class="o_kanban_primary_left">
                                    <div class="o_primary">
                                        <span><t t-esc="record.name.value"/></span>
                                        <span t-if="record.partner_id.value">
                                            <strong><t t-esc="record.partner_id.value"/></strong>
                                        </span>
                                    </div>
                                    <div t-if="record.alias_name.value and record.alias_domain.value">
                                        <span><i class="fa fa-envelope" role="img" aria-label="Domain Alias" title="Domain Alias"></i> <a t-att-href="'mailto:' + record.alias_id.value" title="Send an email"><t t-esc="record.alias_id.value"/></a></span>
                                    </div>
                                    <div t-if="record.rating_active.raw_value" class="mt8 text-primary" title="Percentage of happy ratings over the past 30 days." groups="project.group_project_rating">
                                        <b>
                                            <a name="action_view_all_rating" type="object" context="{'search_default_rating_last_30_days':1}">
                                                <t t-if="record.rating_percentage_satisfaction.value != -1">
                                                    <i class="fa fa-smile-o" role="img" aria-label="Percentage of satisfaction" title="Percentage of satisfaction"/> <t t-esc="record.rating_percentage_satisfaction.value"/>%
                                                </t>
                                            </a>
                                        </b>
                                    </div>
                                </div>
                            </div>
                            <div class="o_kanban_card_manage_pane dropdown-menu" groups="project.group_project_manager" role="menu">
                                <div class="o_kanban_card_manage_section o_kanban_manage_reports">
                                    <div role="menuitem">
                                        <a name="%(portal.portal_share_action)d" type="action">Share</a>
                                    </div>
                                    <div role="menuitem">
                                        <a type="edit">Edit</a>
                                    </div>
                                </div>
                                <div role="menuitem" aria-haspopup="true" class="o_no_padding_kanban_colorpicker">
                                    <ul class="oe_kanban_colorpicker" data-field="color" role="popup"/>
                                </div>
                            </div>
                            <a class="o_kanban_manage_toggle_button o_left" href="#" groups="project.group_project_manager"><i class="fa fa-ellipsis-v" role="img" aria-label="Manage" title="Manage"/></a>
                            <span class="o_right"><field name="is_favorite" widget="boolean_favorite" nolabel="1" force_save="1" /></span>
                        </div>

                        <div class="o_project_kanban_boxes">
                            <a class="o_project_kanban_box" name="action_view_tasks" type="object">
                                <div>
                                    <span class="o_value"><t t-esc="record.task_count.value"/></span>
                                    <span class="o_label"><t t-esc="record.label_tasks.value"/></span>
                                </div>
                            </a>
                            <a t-if="record.analytic_account_id.raw_value" class="o_project_kanban_box o_project_timesheet_box" name="action_view_account_analytic_line" type="object" groups="analytic.group_analytic_accounting">
                                <div>
                                    <span class="o_label">Profitability</span>
                                </div>
                            </a>
                        </div>
                    </div>
                </t>
            </templates>
        </kanban>
    </field>
</record>

<!-- ket thuc model goc -->

<record model="ir.ui.view" id="view_my_task_kanban">
  <field name="name">project.task.kanban</field>
  <field name="model">my.project.task</field>
  <field name="arch" type="xml">
      <kanban default_group_by="stage_id" class="o_kanban_small_column o_kanban_project_tasks" on_create="quick_create" quick_create_view="project.quick_create_task_form" examples="project" js_class="project_kanban" sample="1">
          <field name="color"/>
          <field name="priority"/>
          <field name="stage_id" options='{"group_by_tooltip": {"description": "Description"}}'/>
          <field name="user_id"/>
          <field name="partner_id"/>
          <field name="sequence"/>
          <field name="is_closed"/>
          <field name="partner_is_company"/>
          <field name="displayed_image_id"/>
          <field name="active"/>
          <field name="legend_blocked"/>
          <field name="legend_normal"/>
          <field name="legend_done"/>
          <field name="activity_ids"/>
          <field name="activity_state"/>
          <field name="rating_last_value"/>
          <field name="rating_ids"/>
          <progressbar field="kanban_state" colors='{"done": "success", "blocked": "danger", "normal": "muted"}'/>
          <templates>
          <t t-name="kanban-box">
              <div t-attf-class="{{!selection_mode ? 'oe_kanban_color_' + kanban_getcolor(record.color.raw_value) : ''}} oe_kanban_card oe_kanban_global_click">
                  <div class="oe_kanban_content">
                      <div class="o_kanban_record_top">
                          <div class="o_kanban_record_headings">
                              <strong class="o_kanban_record_title"><field name="name"/></strong>
                              <span  invisible="context.get('default_project_id', False) or context.get('fsm_mode', False)"><br/><field name="project_id" required="1"/></span>
                              <br />
                              <t t-if="record.partner_id.value">
                                  <span t-if="!record.partner_is_company.raw_value">
                                      <field name="commercial_partner_id"/>
                                  </span>
                                  <span t-else="">
                                      <field name="partner_id"/>
                                  </span>
                              </t>
                              <t t-else="record.email_from.raw_value"><span><field name="email_from"/></span></t>
                          </div>
                          <div class="o_dropdown_kanban dropdown" t-if="!selection_mode" groups="base.group_user">
                              <a role="button" class="dropdown-toggle o-no-caret btn" data-toggle="dropdown" data-display="static" href="#" aria-label="Dropdown menu" title="Dropdown menu">
                                  <span class="fa fa-ellipsis-v"/>
                              </a>
                              <div class="dropdown-menu" role="menu">
                                  <a t-if="widget.editable" role="menuitem" type="set_cover" class="dropdown-item" data-field="displayed_image_id">Set Cover Image</a>
                                  <a name="%(portal.portal_share_action)d" role="menuitem" type="action" class="dropdown-item">Share</a>
                                  <a t-if="widget.editable" role="menuitem" type="edit" class="dropdown-item">Edit</a>
                                  <a t-if="widget.editable" role="menuitem" class="dropdown-item" name="toggle_active" type="object">
                                      <t t-if="record.active.raw_value">Archive</t>
                                      <t t-if="!record.active.raw_value">Restore</t>
                                  </a>
                                  <a t-if="widget.deletable" role="menuitem" type="delete" class="dropdown-item">Delete</a>
                                  <div role="separator" class="dropdown-divider"></div>
                                  <ul class="oe_kanban_colorpicker" data-field="color"/>
                              </div>
                          </div>
                      </div>
                      <div class="o_kanban_record_body">
                          <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}" invisible="context.get('fsm_mode', False)"/>
                          <div t-if="record.displayed_image_id.value">
                              <field name="displayed_image_id" widget="attachment_image"/>
                          </div>
                      </div>
                      <div class="o_kanban_record_bottom" t-if="!selection_mode">
                          <div class="oe_kanban_bottom_left">
                              <field name="priority" widget="priority"/>
                              <field name="activity_ids" widget="kanban_activity"/>
                              <b t-if="record.rating_ids.raw_value.length">
                                  <span style="font-weight:bold;" class="fa fa-fw mt4 fa-smile-o text-success" t-if="record.rating_last_value.value == 5" title="Latest Rating: Satisfied" role="img" aria-label="Happy face"/>
                                  <span style="font-weight:bold;" class="fa fa-fw mt4 fa-meh-o text-warning" t-if="record.rating_last_value.value == 3" title="Latest Rating: Not Satisfied" role="img" aria-label="Neutral face"/>
                                  <span style="font-weight:bold;" class="fa fa-fw mt4 fa-frown-o text-danger" t-if="record.rating_last_value.value == 1" title="Latest Rating: Higly Dissatisfied" role="img" aria-label="Sad face"/>
                              </b>
                              <div name="date_deadline" attrs="{'invisible': [('is_closed', '=', True)]}">
                                  <field name="date_deadline" widget="remaining_days"/>
                              </div>
                          </div>
                          <div class="oe_kanban_bottom_right" t-if="!selection_mode">
                              <field name="kanban_state" widget="state_selection" groups="base.group_user" invisible="context.get('fsm_mode', False)"/>
                              <field name="user_id" widget="many2one_avatar_user"/>
                          </div>
                      </div>
                  </div>
                  <div class="oe_clear"></div>
              </div>
          </t>
          </templates>
      </kanban>
  </field>
</record>

      <record id="project_task_from_view" model="ir.ui.view">
        <field name="name">project_task_from_view</field>
        <field name="model">my.project.task</field>
        <!-- <field name="inherit_id" ref="project.view_task_form2"></field> -->
        <field name="arch" type="xml">
          <!-- <xpath expr="//field[@name='partner_id']" position="after">
            <field name="name" string="Date create"/>
            <field name="project_id"/>
        </xpath> -->
            <tree string="My task">
              <field name="name" string="Date create"/>
              <field name="project_id"/>
              <field name="stage_id"/>
              <field name="write_date"/>
              <field name="date_end"/>
              <field name="date_assign"/>
              <field name="date_deadline"/>
            </tree>
        </field>
      </record>
    
    <record id="my_project_action" model="ir.actions.act_window">
      <field name="name">my_project</field>
      <field name="res_model">my.project</field>
      <field name="view_mode">kanban,tree,form</field>
    </record>

    <record id="project_task_action" model="ir.actions.act_window">
      <field name="name">project_task</field>
      <field name="res_model">my.project.task</field>
      <field name="view_mode">kanban,tree,form</field>
    </record>





    <!-- Top menu item -->

    <menuitem name="myProject" id="my_project.menu_root"/>

    <!-- menu categories -->

      <menuitem name="Project" id="my_project.menu_1" parent="my_project.menu_root"
                action="my_project_action" />
      <menuitem name="Task" id="my_project.menu_2" parent="my_project.menu_root"
      action="project_task_action"/>

      <menuitem name="Leader" id="my_project.menu_3" parent="my_project.menu_root"
      action="leader_action"/>
      <menuitem name="Viewer" id="my_project.menu_4" parent="my_project.menu_root"
      action="viewer_action"/>

    <!-- actions -->


  </data>
</odoo>